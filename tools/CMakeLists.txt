function(add_granite_tool NAME)
    add_granite_executable(${NAME} ${ARGN})
    target_include_directories(${NAME} PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../third_party/gli)
    target_link_libraries(${NAME} math stb util tool-util filesystem)
    target_compile_definitions(${NAME} PRIVATE RAPIDJSON_HAS_STDSTRING=1)
    target_include_directories(${NAME} PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../third_party/rapidjson/include)
    if (CMAKE_COMPILER_IS_GNUCXX)
        target_compile_options(${NAME} PRIVATE -Wno-type-limits -Wno-pedantic -Wno-ignored-qualifiers -Wno-unused-parameter)
    endif()
endfunction()

add_granite_library(tool-util tool_util.hpp tool_util.cpp)
target_link_libraries(tool-util math util mufft)
target_include_directories(tool-util PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/../third_party/gli)
if (CMAKE_COMPILER_IS_GNUCXX)
    target_compile_options(tool-util PUBLIC -Wno-type-limits -Wno-pedantic -Wno-ignored-qualifiers -Wno-unused-parameter)
endif()

add_granite_tool(png2chunky png2chunky.cpp)
add_granite_tool(ktxcat ktxcat.cpp)
add_granite_tool(ktxcube ktxcube.cpp)
add_granite_tool(heightgen heightgen.cpp)
add_granite_tool(terraingen terraingen.cpp)
add_granite_tool(cluttergen cluttergen.cpp)
add_granite_tool(png2ktx png2ktx.cpp)

target_link_libraries(cluttergen fast-noise)
target_link_libraries(heightgen fast-noise)

